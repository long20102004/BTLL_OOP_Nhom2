<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
</head>
<body>
    <h1>Chat Room</h1>
    <div id="chat-box">
        <ul>
            <li th:each="message : ${messages}">
                <span th:text="${message.sender != null ? message.sender.username : 'Anonymous'}">Sender</span>:
<!--                <img src="/uploads/1731001546366_code.png" alt="Image Message">-->
                <span th:if="${message.type == 'text'}" th:text="${T(java.lang.String).valueOf(message.content)}">Message</span>
                <img th:if="${message.type == 'image'}" th:src="@{${message.getContent()}}" alt="Image Message"/>
            </li>
        </ul>
    </div>

    <form id="chat-form" th:action="@{/chat}" method="post" enctype="multipart/form-data">
        <input type="text" id="message" name="message" placeholder="Type a message...">
        <input type="file" id="image" name="image" accept="image/*">
        <button type="submit">Send</button>
    </form>
</body>
</html>